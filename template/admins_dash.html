{% extends "base.html" %} 

{% block content %}
<style>
.fontbrother {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    color: white;
}
</style>
<title>Lighthouse - Admin</title>
<section>
    <div style="min-height: 100vh; max-height: 100%;background-color: rgb(0, 0, 60); padding-top: 20px;">
        <div class="container" id="profile" style="background-color: rgb(60, 60, 83); border-radius: 15px;">
            <div class="row" >
                <div class="col">
                    <div class="card" style="margin-left: auto; margin-right: auto; background-color: transparent; border: 0px; padding: 5%;">
                        <div id="photo" style="text-align: center;"></div>
                        <div class="container" style="margin-top: 10px;">
                            <h4 style="text-align: center;" class="fontbrother" id="name"></h4>
                            <p style="text-align: center;" class="fontbrother" id="designation"></p>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="container">
                        <div class="row">
                            <div class="col">
                                <div class="pie animate fontbrother" style="--p:85;--c:lightgreen; color: white;">85%</div>
                            </div>
                            <div class="col">
                                <div class="pie animate fontbrother" style="--p:85;--c:rgb(58, 212, 199); color: white;">85%</div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <table style="margin-top: 3px;">
                                    <tr>
                                      <td class="fontbrother" style="padding: 5px; font-size: small;">Total Leads:</td>
                                      <td class="fontbrother" style="padding: 5px; font-size: small;">1000</td>
                                    </tr>
                                    <tr>
                                      <td class="fontbrother" style="padding: 5px; font-size: small;">Agent Leads:</td>
                                      <td class="fontbrother" style="padding: 5px; font-size: small;">2000</td>
                                    </tr>
                                  </table>
                            </div>
                            <div class="col">
                                <table style="margin-top: 3px;">
                                    <tr>
                                      <td class="fontbrother" style="padding: 5px; font-size: small;">Total Deals:</td>
                                      <td class="fontbrother" style="padding: 5px; font-size: small;">1000</td>
                                    </tr>
                                    <tr>
                                      <td class="fontbrother" style="padding: 5px; font-size: small;">Agent Deals:</td>
                                      <td class="fontbrother" style="padding: 5px; font-size: small;">2000</td>
                                    </tr>
                                  </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="card" style="margin-left: auto; margin-right: auto; background-color: transparent; border: 0px; padding: 5%;">
                        <div id="photo" style="text-align: center;"></div>
                        <div class="container" style="margin-top: 10px;">
                            <h4 style="text-align: center;" class="fontbrother" id="name"></h4>
                            <p style="text-align: center;" class="fontbrother" id="designation"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
                <!--
                <div class="col">
                    <h5 style="text-align: center;">Exits</h5>
                    <table
                    id="table1"
                    data-toggle="true"
                    class="unselectable oswald"
                    data-toolbar="#toolbar"
                    data-pagination="true"
                    data-height="auto"
                    data-page-size="5"
                    data-page-list="[25, 50, 100, 200, All]">
                    </table>
                </div>
                <div class="col">
                    <h5 style="text-align: center;">Leaves</h5>
                    <table
                    id="table2"
                    data-toggle="true"
                    class="unselectable oswald"
                    data-toolbar="#toolbar"
                    data-pagination="true"
                    data-height="auto"
                    data-page-size="5"
                    data-page-list="[25, 50, 100, 200, All]">
                    </table>
                </div>
            -->
            
        
        <div class="container-fluid">
            <h5 class="fontbrother" style="text-align: center;">Deals</h5>
            <table
              id="table"
              data-toggle="true"
              class="unselectable oswald"
              data-toolbar="#toolbar"
              data-pagination="true"
              data-height="auto"
              data-page-size="5"
              data-page-list="[25, 50, 100, 200, All]">
              <tfoot>
                <tr>
                    <td>Total Amounts</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td id="total_deal_price"></td>
                    <td></td>
                    <td id="total_commission"></td>
                    <td id="total_paid"></td>
                    <td></td>
                    <td id="total_pending"></td>
                    <td id="total_eligible"></td>
                    <td></td>
                </tr>
              </tfoot>
            </table>
        </div>
    </div>
</section>
{% endblock %}


{% block scripts %}
<script>
$(window).on('load',(function(){
    var columns = {{col|tojson}};
    var data = {{data|tojson}};
    $(function() {
        $('#table').bootstrapTable({ 
            data: data.reverse(),
            columns: columns,
        });
    })
    var columns1 = {{col1|tojson}};
    var data1 = {{data1|tojson}};
    $(function() {
        $('#table1').bootstrapTable({ 
            data: data1.reverse(),
            columns: columns1,
        });
    })
    var gross_commission1 = 0;
    var total_deal_price1 = 0;
    var total_paid1 = 0;
    var total_pending1 = 0;
    var total_eligible1 = 0;
    $(data).each(function(i){
        total_paid1 = total_paid1+parseFloat((data[i].amount_received).replace(",",""));
        gross_commission1 = gross_commission1+parseFloat((data[i].gross_commission).replace(",",""));
        total_deal_price1 = total_deal_price1+parseFloat((data[i].deal_price).replace(",",""));
        total_pending1 = total_pending1+parseFloat((data[i].agent_pending).replace(",",""));
        total_eligible1 = total_eligible1+parseFloat((data[i].amount_eligible).replace(",",""));
    });
    $('#total_commission').html(gross_commission1.toLocaleString(undefined, {minimumFractionDigits: 2})); 
    $('#total_deal_price').html(total_deal_price1.toLocaleString(undefined, {minimumFractionDigits: 2})); 
    $('#total_paid').html(total_paid1.toLocaleString(undefined, {minimumFractionDigits: 2})); 
    $('#total_pending').html(total_pending1.toLocaleString(undefined, {minimumFractionDigits: 2})); 
    $('#total_eligible').html(total_eligible1.toLocaleString(undefined, {minimumFractionDigits: 2})); 

    var columns2 = {{col2|tojson}};
    var data2 = {{data2|tojson}};
    $(function() {
        $('#table2').bootstrapTable({ 
            data: data2.reverse(),
            columns: columns2,
        });
    })

    var data3 = {{data3|tojson}};
    console.log(data3)
    $(data3).each(function(i){
        $('#name').html(data3[i].Name); 
        $('#designation').html(data3[i].Position); 
        $('#photo').html('<img src="'+data3[i].profile_photo+'" alt="Avatar" style="width:125px; border-radius: 50%; margin-left: auto; margin-right: auto;">');
    }); 
}));

</script>
<style type='text/css'>
.row-index {
    width: 50px;
    display: inline-block;
}
body {
    overflow-x: hidden;
    }
</style>
{% endblock %}